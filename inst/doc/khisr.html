<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Getting Started</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Getting Started</h1>



<p>The <code>khisr</code> R package simplifies interaction with the
District Health Information System 2 (DHIS2) platform. Designed for
researchers and public health professionals, <code>khisr</code>
streamlines data retrieval and analysis, saving you valuable time
compared to manual methods.</p>
<div id="authentication" class="section level2">
<h2>Authentication</h2>
<p><code>khisr</code> prioritizes security by operating in authenticated
mode by default. This ensures you interact with DHIS2 as a recognized
user. To begin exploring DHIS2 data, you’ll need to establish your
credentials.</p>
<div id="setting-your-credentials" class="section level3">
<h3>Setting Your Credentials:</h3>
<ol style="list-style-type: decimal">
<li><p><strong>Obtain Credentials</strong>: Secure your DHIS2 username
and password through appropriate channels within the DHIS2
organization.</p></li>
<li><p><strong>Store Credentials Securely</strong>: <code>khisr</code>
offers a convenient way to store your credentials within your R
environment. Refer to the comprehensive guide, <a href="https://khisr.damurka.com/articles/set-your-credentials.html">Set
Your Credentials</a>, for detailed instructions on setting and managing
credentials effectively.</p></li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Set the credentials using username and password</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">khis_cred</span>(<span class="at">username =</span> <span class="st">&#39;your-dhis2-username&#39;</span>, <span class="at">password =</span> <span class="st">&#39;your-dhis2-password&#39;</span>, <span class="at">base_url =</span> <span class="st">&#39;https://&lt;your dhis2 instance&gt;&#39;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co"># Set credentials using configuration path</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">khis_cred</span>(<span class="at">config_path =</span> <span class="st">&#39;path/to/secret.json&#39;</span>)</span></code></pre></div>
<p><strong>Note</strong>: Replace placeholders like
‘<em>your-dhis2-username</em>’ and ‘<em>path/to/your/secret.json</em>’
with your actual credentials and file path.</p>
</div>
</div>
<div id="metadata" class="section level2">
<h2>Metadata</h2>
<p>DHIS2 utilizes metadata to define the structure and meaning of its
data. Explore the <a href="https://khisr.damurka.com/articles/data-dimensions.html">data
dimensions</a> resource for a deeper understanding.</p>
<div id="metadata-helpers-in-khisr" class="section level3">
<h3>Metadata helpers in khisr</h3>
<p><code>khisr</code> provides a set of high-level functions to retrieve
details about various DHIS2 metadata categories. These functions often
leverage your R IDE’s auto-complete feature for faster typing.</p>
<p>The following table summarizes these <code>khisr</code> metadata
helper functions:</p>
<table>
<thead>
<tr class="header">
<th align="left">khisr function</th>
<th align="left">DHIS2 API Endpoint</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>get_categories()</code></td>
<td align="left">categories</td>
</tr>
<tr class="even">
<td align="left"><code>get_category_combos()</code></td>
<td align="left">categoryCombos</td>
</tr>
<tr class="odd">
<td align="left"><code>get_category_option_combos()</code></td>
<td align="left">categoryOptionCombos</td>
</tr>
<tr class="even">
<td align="left"><code>get_category_option_group_sets()</code></td>
<td align="left">categoryOptionGroupSets</td>
</tr>
<tr class="odd">
<td align="left"><code>get_category_option_groups()</code></td>
<td align="left">categoryOptionGroups</td>
</tr>
<tr class="even">
<td align="left"><code>get_category_options()</code></td>
<td align="left">categoryOptions</td>
</tr>
<tr class="odd">
<td align="left"><code>get_data_element_group_sets()</code></td>
<td align="left">dataElementGroupSets</td>
</tr>
<tr class="even">
<td align="left"><code>get_data_element_groups()</code></td>
<td align="left">dataElementGroups</td>
</tr>
<tr class="odd">
<td align="left"><code>get_data_elements()</code></td>
<td align="left">dataElements</td>
</tr>
<tr class="even">
<td align="left"><code>get_data_sets()</code></td>
<td align="left">dataSets</td>
</tr>
<tr class="odd">
<td align="left"><code>get_indicator_group_sets()</code></td>
<td align="left">indicatorGroupSets</td>
</tr>
<tr class="even">
<td align="left"><code>get_indicator_groups()</code></td>
<td align="left">indicatorGroups</td>
</tr>
<tr class="odd">
<td align="left"><code>get_indicators()</code></td>
<td align="left">indicators</td>
</tr>
<tr class="even">
<td align="left"><code>get_option_group_sets()</code></td>
<td align="left">optionGroupSets</td>
</tr>
<tr class="odd">
<td align="left"><code>get_option_groups()</code></td>
<td align="left">optionGroups</td>
</tr>
<tr class="even">
<td align="left"><code>get_option_sets()</code></td>
<td align="left">optionSets</td>
</tr>
<tr class="odd">
<td align="left"><code>get_options()</code></td>
<td align="left">options</td>
</tr>
<tr class="even">
<td align="left"><code>get_organisation_unit_groupsets()</code></td>
<td align="left">organisationUnitGroupSets</td>
</tr>
<tr class="odd">
<td align="left"><code>get_organisation_unit_groups()</code></td>
<td align="left">organisationUnitGroups</td>
</tr>
<tr class="even">
<td align="left"><code>get_organisation_units()</code></td>
<td align="left">organisationUnits</td>
</tr>
<tr class="odd">
<td align="left"><code>get_dimensions()</code></td>
<td align="left">dimensions</td>
</tr>
<tr class="even">
<td align="left"><code>get_user_groups()</code></td>
<td align="left">userGroups</td>
</tr>
<tr class="odd">
<td align="left"><code>get_period_types()</code></td>
<td align="left">periodTypes</td>
</tr>
</tbody>
</table>
</div>
<div id="metadata-object-filter" class="section level3">
<h3>Metadata object filter</h3>
<p><code>khisr</code> allows you to filter retrieved metadata using a
straightforward approach. The filter format follows the pattern
<strong>property:operator:value</strong>. Here’s a breakdown of the
components:</p>
<ul>
<li><strong>property</strong>: The property of the metadata you want to
filter on.</li>
<li><strong>operator</strong>: The comparison operator you want to
perform (examples: <code>eq</code> for equality, <code>like</code> for
case-sensitive string matching).</li>
<li><strong>value</strong>: The value to use for comparison (not
required for all operators).</li>
</ul>
<p>The following table provides a summary of the supported
operators:</p>
<table>
<colgroup>
<col width="19%" />
<col width="19%" />
<col width="60%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">DHIS2 Operator</th>
<th align="left">Infix Operator</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>eq</code></td>
<td align="left"><code>%.eq%</code></td>
<td align="left">Equality</td>
</tr>
<tr class="even">
<td align="left"><code>!eq</code></td>
<td align="left"><code>%.~eq%</code></td>
<td align="left">Inequality</td>
</tr>
<tr class="odd">
<td align="left"><code>ieq</code></td>
<td align="left"><code>%.ieq%</code></td>
<td align="left">Case insensitive string, match exact</td>
</tr>
<tr class="even">
<td align="left"><code>ne</code></td>
<td align="left"><code>%.ne%</code></td>
<td align="left">Inequality</td>
</tr>
<tr class="odd">
<td align="left"><code>like</code></td>
<td align="left"><code>%.Like%</code></td>
<td align="left">Case sensitive string, match anywhere</td>
</tr>
<tr class="even">
<td align="left"><code>!like</code></td>
<td align="left"><code>%.~Like%</code></td>
<td align="left">Case sensitive string, not match anywhere</td>
</tr>
<tr class="odd">
<td align="left"><code>$like</code></td>
<td align="left"><code>%.^Like%</code></td>
<td align="left">Case sensitive string, match start</td>
</tr>
<tr class="even">
<td align="left"><code>!$like</code></td>
<td align="left"><code>%.~^Like%</code></td>
<td align="left">Case sensitive string, not match start</td>
</tr>
<tr class="odd">
<td align="left"><code>like$</code></td>
<td align="left"><code>%.Like$%</code></td>
<td align="left">Case sensitive string, match end</td>
</tr>
<tr class="even">
<td align="left"><code>!like$</code></td>
<td align="left"><code>%.~Like$%</code></td>
<td align="left">Case sensitive string, not match end</td>
</tr>
<tr class="odd">
<td align="left"><code>ilike</code></td>
<td align="left"><code>%.like%</code></td>
<td align="left">Case insensitive string, match anywhere</td>
</tr>
<tr class="even">
<td align="left"><code>!ilike</code></td>
<td align="left"><code>%.~like%</code></td>
<td align="left">Case insensitive string, not match anywhere</td>
</tr>
<tr class="odd">
<td align="left"><code>$ilike</code></td>
<td align="left"><code>%.^like%</code></td>
<td align="left">Case insensitive string, match start</td>
</tr>
<tr class="even">
<td align="left"><code>!$ilike</code></td>
<td align="left"><code>%.~^like%</code></td>
<td align="left">Case insensitive string, not match start</td>
</tr>
<tr class="odd">
<td align="left"><code>ilike$</code></td>
<td align="left"><code>%.like$%</code></td>
<td align="left">Case insensitive string, match end</td>
</tr>
<tr class="even">
<td align="left"><code>!ilike$</code></td>
<td align="left"><code>%.~like$%</code></td>
<td align="left">Case insensitive string, not match end</td>
</tr>
<tr class="odd">
<td align="left"><code>gt</code></td>
<td align="left"><code>%.gt%</code></td>
<td align="left">Greater than</td>
</tr>
<tr class="even">
<td align="left"><code>ge</code></td>
<td align="left"><code>%.ge%</code></td>
<td align="left">Greater than or equal</td>
</tr>
<tr class="odd">
<td align="left"><code>lt</code></td>
<td align="left"><code>%.lt%</code></td>
<td align="left">Less than</td>
</tr>
<tr class="even">
<td align="left"><code>le</code></td>
<td align="left"><code>%.le%</code></td>
<td align="left">Less than or equal</td>
</tr>
<tr class="odd">
<td align="left"><code>token</code></td>
<td align="left"><code>%.token%</code></td>
<td align="left">Match on multiple tokens in search property</td>
</tr>
<tr class="even">
<td align="left"><code>!token</code></td>
<td align="left"><code>%.~token%</code></td>
<td align="left">Not match on multiple tokens in search property</td>
</tr>
<tr class="odd">
<td align="left"><code>in</code></td>
<td align="left"><code>%.in%</code></td>
<td align="left">Find objects matching 1 or more values</td>
</tr>
<tr class="even">
<td align="left"><code>!in</code></td>
<td align="left"><code>%.~in%</code></td>
<td align="left">Find objects not matching 1 or more values</td>
</tr>
</tbody>
</table>
</div>
<div id="working-with-metadata-filters" class="section level3">
<h3>Working with metadata filters</h3>
<p>Basic usage of the metadata filter</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Retrieve organisation units by county (level 2)</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>county <span class="ot">&lt;-</span> <span class="fu">get_organisation_units</span>(level <span class="sc">%.eq%</span> <span class="st">&#39;2&#39;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>county</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co">#&gt; # A tibble: 47 × 2</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co">#&gt;    name                   id         </span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                  &lt;chr&gt;      </span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co">#&gt;  1 Baringo County         vvOK1BxTbet</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co">#&gt;  2 Bomet County           HMNARUV2CW4</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">#&gt;  3 Bungoma County         KGHhQ5GLd4k</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co">#&gt;  4 Busia County           Tvf1zgVZ0K4</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co">#&gt;  5 Elgeyo Marakwet County MqnLxQBigG0</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co">#&gt;  6 Embu County            PFu8alU2KWG</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co">#&gt;  7 Garissa County         uyOrcHZBpW0</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co">#&gt;  8 Homa Bay County        nK0A12Q7MvS</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="co">#&gt;  9 Isiolo County          bzOfj0iwfDH</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="co">#&gt; 10 Kajiado County         Hsk1YV8kHkT</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="co">#&gt; # ℹ 37 more rows</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co"># Retrieve county by name (Mombasa)</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>county <span class="ot">&lt;-</span> <span class="fu">get_organisation_units</span>(level <span class="sc">%.eq%</span> <span class="st">&#39;2&#39;</span>,</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>                                 name <span class="sc">%.like%</span> <span class="st">&#39;mombasa&#39;</span>)</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>county</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="co">#&gt;   name           id         </span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;      </span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="co">#&gt; 1 Mombasa County wsBsC6gjHvn</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>data_element_id <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;cXe64Yk0QMY&#39;</span>, <span class="st">&#39;XEX93uLsAm2&#39;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co"># Retrieve data elements by ID using operator in</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>data_elements <span class="ot">&lt;-</span> <span class="fu">get_data_elements</span>(id <span class="sc">%.in%</span> data_element_id)</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>data_elements</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co">#&gt;   name         id         </span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;      </span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="co">#&gt; 1 CBE-Abnormal XEX93uLsAm2</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt; 2 CBE-Normal   cXe64Yk0QMY</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co"># Retrieve data elements by filtering using dataElementGroups</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>data_elements <span class="ot">&lt;-</span> <span class="fu">get_data_elements</span>(dataElementGroups.name <span class="sc">%.like%</span> <span class="st">&#39;moh 705&#39;</span>)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>data_elements</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co">#&gt; # A tibble: 96 × 2</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="co">#&gt;    name                         id         </span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                        &lt;chr&gt;      </span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="co">#&gt;  1 Abortion                     IrWSgk9GsUm</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="co">#&gt;  2 All other diseases           KxT47tbKHsd</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="co">#&gt;  3 Anaemia cases                kkUHOwGMawD</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">#&gt;  4 Arthritis, Joint pains etc.  waNhWrS3HL6</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co">#&gt;  5 Asthma                       L82lvvxVaqt</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">#&gt;  6 Autism                       L529r3Wvtcf</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="co">#&gt;  7 Bilharzia  (Schistosomiasis) ojFSHMwbkHK</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="co">#&gt;  8 Brucellosis                  nb9cfWgxYFc</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="co">#&gt;  9 Burns                        dkEYL9Sous9</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="co">#&gt; 10 Cardiovascular conditions    sZETzNe1To8</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="co">#&gt; # ℹ 86 more rows</span></span></code></pre></div>
</div>
</div>
<div id="data-analytics" class="section level2">
<h2>Data analytics</h2>
<p>The analytics resource in DHIS2 empowers you to access and analyze
aggregated data across various dimensions. To effectively leverage this
resource, let’s explore the key functions and parameters involved:</p>
<div id="key-functions" class="section level3">
<h3>Key Functions</h3>
<ul>
<li><code>get_analytics()</code>: Retrieves aggregated data based on
specified dimensions and filters.</li>
<li><code>analytics_dimension()</code>: Constructs dimensions for
queries, ensuring accurate data retrieval.</li>
<li><code>%.d%</code> (infix operator): Convenient shorthand for
creating dimension filters.</li>
<li><code>%.f%</code> (infix operator): Convenient shorthand for
creating filter dimensions.</li>
</ul>
</div>
<div id="dimension-dx" class="section level3">
<h3>Dimension (dx)</h3>
<p>The <code>dimension</code> query parameter defines which dimensions
should be included in the analytics query. Any number of dimensions can
be specified. The dimension parameter should be repeated for each
dimension to include in the query response. The query response can
potentially contain aggregated values for all combinations of the
specified dimension items. The fixed dimensions are the <strong>data
element</strong> <em>(dx)</em> <strong>period (time)</strong>
<em>(pe)</em> and <strong>organisation unit</strong> <em>(ou)</em>
dimension. You can dynamically add dimensions through categories, data
element group sets and organisation unit group sets.</p>
<table>
<colgroup>
<col width="17%" />
<col width="82%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Dimension ID</th>
<th align="left">Dimensions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">dx</td>
<td align="left">Data elements, indicators, data set reporting rate
metrics,</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">data element operands, program indicators, program data
elements,</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">program attributes, validation rules</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">pe</td>
<td align="left">ISO periods and relative periods (see “date and period
format”)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">ou</td>
<td align="left">Organisation unit hierarchy</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Organisation unit identifiers, keywords
USER_ORGUNIT,</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">USER_ORGUNIT_CHILDREN, USER_ORGUNIT_GRANDCHILDREN,
LEVEL-<level>,</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">and OU_GROUP-<group-id></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">co</td>
<td align="left">Category option combo identifiers (use <code>all</code>
to get all items)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">ao</td>
<td align="left">Category option combo identifiers (use <code>all</code>
to get all items)</td>
</tr>
</tbody>
</table>
</div>
<div id="filter-filter" class="section level3">
<h3>Filter (filter)</h3>
<p>The <code>filter</code> parameter defines which dimensions should be
used as filters for the data retrieved in the analytics query. Any
number of filters can be specified. The filter parameter should be
repeated for each filter to use in the query. A filter differs from a
dimension in that the filter dimensions will not be part of the query
response content, and that the aggregated values in the response will be
collapsed on the filter dimensions. In other words, the data in the
response will be aggregated on the filter dimensions, but the filters
will not be included as dimensions in the actual response.</p>
</div>
<div id="constructing-queries" class="section level3">
<h3>Constructing Queries</h3>
<ul>
<li><strong>Specify Dimensions:</strong> Use the dimensions parameter to
define the dimensions you want to include in the query response.
Leverage the infix operators %.d% for concise and readable code.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># To include a list dimensions for data elements id, dataset ids</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>dx <span class="sc">%.d%</span> <span class="fu">c</span>(<span class="st">&#39;dimension-id-1&#39;</span>, <span class="st">&#39;dimension-id-2&#39;</span>)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co">#&gt; &lt;spliced&gt;</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">#&gt; $dimension</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co">#&gt; [1] &quot;dx:dimension-id-1;dimension-id-2&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>pe <span class="sc">%.d%</span> <span class="st">&#39;LAST_YEAR&#39;</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co">#&gt; &lt;spliced&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co">#&gt; $dimension</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="co">#&gt; [1] &quot;pe:LAST_YEAR&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>ou <span class="sc">%.d%</span> <span class="st">&#39;USER_ORGUNIT&#39;</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="co">#&gt; &lt;spliced&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co">#&gt; $dimension</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="co">#&gt; [1] &quot;ou:USER_ORGUNIT&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co"># showing in the analytics</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="fu">get_analytics</span>(</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>    dx <span class="sc">%.d%</span> <span class="fu">c</span>(<span class="st">&#39;siOyOiOJpI8&#39;</span>, <span class="st">&#39;Lt0FqtnHraW&#39;</span>, <span class="st">&#39;OoakJhWiyZp&#39;</span>),</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    pe <span class="sc">%.d%</span> <span class="st">&#39;LAST_YEAR&#39;</span>,</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>    ou <span class="sc">%.d%</span> <span class="fu">c</span>(<span class="st">&#39;qKzosKQPl6G&#39;</span>)</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>)</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 4</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="co">#&gt;   dx          pe    ou          value</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="co">#&gt; 1 OoakJhWiyZp 2023  qKzosKQPl6G  5092</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="co">#&gt; 2 Lt0FqtnHraW 2023  qKzosKQPl6G 31101</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="co">#&gt; 3 siOyOiOJpI8 2023  qKzosKQPl6G 20554</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co"># Using the startDate and endDate with organisation unit keyword &#39;USER_ORGUNIT&#39;</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="fu">get_analytics</span>(</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>    dx <span class="sc">%.d%</span> <span class="fu">c</span>(<span class="st">&#39;siOyOiOJpI8&#39;</span>, <span class="st">&#39;Lt0FqtnHraW&#39;</span>, <span class="st">&#39;OoakJhWiyZp&#39;</span>),</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>    ou <span class="sc">%.d%</span> <span class="st">&#39;USER_ORGUNIT&#39;</span>,</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>    pe <span class="sc">%.d%</span> <span class="st">&#39;all&#39;</span>,</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>    <span class="at">startDate =</span> <span class="st">&#39;2023-07-01&#39;</span>,</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>    <span class="at">endDate =</span> <span class="st">&#39;2023-12-31&#39;</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>)</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="co">#&gt; # A tibble: 18 × 4</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="co">#&gt;    dx          ou          pe       value</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt;</span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="co">#&gt;  1 siOyOiOJpI8 HfVjCurKxh2 202310  752039</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a><span class="co">#&gt;  2 siOyOiOJpI8 HfVjCurKxh2 202312  649801</span></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a><span class="co">#&gt;  3 Lt0FqtnHraW HfVjCurKxh2 202307 1122201</span></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a><span class="co">#&gt;  4 OoakJhWiyZp HfVjCurKxh2 202308  367153</span></span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a><span class="co">#&gt;  5 siOyOiOJpI8 HfVjCurKxh2 202311  670801</span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a><span class="co">#&gt;  6 Lt0FqtnHraW HfVjCurKxh2 202308  958349</span></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a><span class="co">#&gt;  7 OoakJhWiyZp HfVjCurKxh2 202307  432284</span></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a><span class="co">#&gt;  8 Lt0FqtnHraW HfVjCurKxh2 202312  767631</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a><span class="co">#&gt;  9 OoakJhWiyZp HfVjCurKxh2 202312  284218</span></span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a><span class="co">#&gt; 10 Lt0FqtnHraW HfVjCurKxh2 202310  840132</span></span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a><span class="co">#&gt; 11 Lt0FqtnHraW HfVjCurKxh2 202311  808959</span></span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a><span class="co">#&gt; 12 OoakJhWiyZp HfVjCurKxh2 202309  329442</span></span>
<span id="cb10-25"><a href="#cb10-25" tabindex="-1"></a><span class="co">#&gt; 13 siOyOiOJpI8 HfVjCurKxh2 202307  995428</span></span>
<span id="cb10-26"><a href="#cb10-26" tabindex="-1"></a><span class="co">#&gt; 14 siOyOiOJpI8 HfVjCurKxh2 202309  845893</span></span>
<span id="cb10-27"><a href="#cb10-27" tabindex="-1"></a><span class="co">#&gt; 15 OoakJhWiyZp HfVjCurKxh2 202311  261244</span></span>
<span id="cb10-28"><a href="#cb10-28" tabindex="-1"></a><span class="co">#&gt; 16 siOyOiOJpI8 HfVjCurKxh2 202308  856712</span></span>
<span id="cb10-29"><a href="#cb10-29" tabindex="-1"></a><span class="co">#&gt; 17 OoakJhWiyZp HfVjCurKxh2 202310  257625</span></span>
<span id="cb10-30"><a href="#cb10-30" tabindex="-1"></a><span class="co">#&gt; 18 Lt0FqtnHraW HfVjCurKxh2 202309  943144</span></span></code></pre></div>
<ul>
<li><strong>Apply Filters:</strong> Use the filters parameter to specify
dimensions for filtering data without including them in the
response.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># Filter by period</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>pe <span class="sc">%.f%</span> <span class="st">&#39;LAST_YEAR&#39;</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="co">#&gt; &lt;spliced&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co">#&gt; $filter</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="co">#&gt; [1] &quot;pe:LAST_YEAR&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co"># Filter by organisation unit</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>ou <span class="sc">%.f%</span> <span class="st">&#39;USER_ORGUNIT&#39;</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co">#&gt; &lt;spliced&gt;</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="co">#&gt; $filter</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#&gt; [1] &quot;ou:USER_ORGUNIT&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="co"># showing in the analytics. filter by organisation unit with id &#39;qKzosKQPl6G&#39;</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="co"># and period &#39;LAST_YEAR&#39;</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="fu">get_analytics</span>(</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>    dx <span class="sc">%.d%</span> <span class="fu">c</span>(<span class="st">&#39;siOyOiOJpI8&#39;</span>, <span class="st">&#39;Lt0FqtnHraW&#39;</span>, <span class="st">&#39;OoakJhWiyZp&#39;</span>),</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>    pe <span class="sc">%.f%</span> <span class="st">&#39;LAST_YEAR&#39;</span>,</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>    ou <span class="sc">%.f%</span> <span class="st">&#39;qKzosKQPl6G&#39;</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>)</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 2</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="co">#&gt;   dx          value</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt;</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a><span class="co">#&gt; 1 OoakJhWiyZp  5092</span></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="co">#&gt; 2 siOyOiOJpI8 20554</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="co">#&gt; 3 Lt0FqtnHraW 31101</span></span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
